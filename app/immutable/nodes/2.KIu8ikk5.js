import"../chunks/DsnmJJEf.js";import{o as J,p as as,y as B,h as N,A as rs,K as ts,X as F,aE as is,aF as ns,a8 as os,ae as Y,x as O,z as H,C as ls,aq as ds,G as L,J as us,B as cs,a7 as fs,aG as hs,a5 as k,ao as K,i as vs,aH as _s,D as U,F as ms,aI as ys,aJ as ps,aK as S,E as P,w as xs,aL as gs,an as ws,aM as Es,f as Ms,$ as Q,aN as Is,U as W,m as Z,l as G,a0 as V,a2 as Ts}from"../chunks/C_rb9rw5.js";import{d as bs}from"../chunks/DWeGCwpB.js";import{s as As}from"../chunks/BqwzWOqO.js";import{b as Ns}from"../chunks/DqMzUWZ-.js";function Cs(o,e){return e}function Ds(o,e,s){for(var r=o.items,n=[],t=e.length,a=0;a<t;a++)gs(e[a].e,n,!0);var i=t>0&&n.length===0&&s!==null;if(i){var p=s.parentNode;ws(p),p.append(s),r.clear(),M(o,e[0].prev,e[t-1].next)}Es(n,()=>{for(var f=0;f<t;f++){var _=e[f];i||(r.delete(_.k),M(o,_.prev,_.next)),P(_.e,!i)}})}function Rs(o,e,s,r,n,t=null){var a=o,i={flags:e,items:new Map,first:null};{var p=o;a=N?B(rs(p)):p.appendChild(J())}N&&ts();var f=null,_=!1,I=new Map,l=is(()=>{var c=s();return vs(c)?c:c==null?[]:K(c)}),m,d;function u(){Hs(d,m,i,I,a,n,e,r,s),t!==null&&(m.length===0?f?U(f):f=L(()=>t(a)):f!==null&&ms(f,()=>{f=null}))}as(()=>{d??=Ms,m=F(l);var c=m.length;if(_&&c===0)return;_=c===0;let b=!1;if(N){var w=ns(a)===os;w!==(c===0)&&(a=Y(),B(a),O(!1),b=!0)}if(N){for(var h=null,x,v=0;v<c;v++){if(H.nodeType===ls&&H.data===ds){a=H,b=!0,O(!1);break}var T=m[v],E=r(T,v);x=X(H,i,h,null,T,E,v,n,e,s),i.items.set(E,x),h=x}c>0&&B(Y())}if(N)c===0&&t&&(f=L(()=>t(a)));else if(us()){var A=new Set,g=cs;for(v=0;v<c;v+=1){T=m[v],E=r(T,v);var C=i.items.get(E)??I.get(E);C?j(C,T,v):(x=X(null,i,null,null,T,E,v,n,e,s,!0),I.set(E,x)),A.add(E)}for(const[D,R]of i.items)A.has(D)||g.skipped_effects.add(R.e);g.add_callback(u)}else u();b&&O(!0),F(l)}),N&&(a=H)}function Hs(o,e,s,r,n,t,a,i,p){var f=e.length,_=s.items,I=s.first,l=I,m,d=null,u=[],c=[],b,w,h,x;for(x=0;x<f;x+=1){if(b=e[x],w=i(b,x),h=_.get(w),h===void 0){var v=r.get(w);if(v!==void 0){r.delete(w),_.set(w,v);var T=d?d.next:l;M(s,d,v),M(s,v,T),z(v,T,n),d=v}else{var E=l?l.e.nodes_start:n;d=X(E,s,d,d===null?s.first:d.next,b,w,x,t,a,p)}_.set(w,d),u=[],c=[],l=d.next;continue}if(j(h,b,x),(h.e.f&S)!==0&&U(h.e),h!==l){if(m!==void 0&&m.has(h)){if(u.length<c.length){var A=c[0],g;d=A.prev;var C=u[0],D=u[u.length-1];for(g=0;g<u.length;g+=1)z(u[g],A,n);for(g=0;g<c.length;g+=1)m.delete(c[g]);M(s,C.prev,D.next),M(s,d,C),M(s,D,A),l=A,d=D,x-=1,u=[],c=[]}else m.delete(h),z(h,l,n),M(s,h.prev,h.next),M(s,h,d===null?s.first:d.next),M(s,d,h),d=h;continue}for(u=[],c=[];l!==null&&l.k!==w;)(l.e.f&S)===0&&(m??=new Set).add(l),c.push(l),l=l.next;if(l===null)continue;h=l}u.push(h),d=h,l=h.next}if(l!==null||m!==void 0){for(var R=m===void 0?[]:K(m);l!==null;)(l.e.f&S)===0&&R.push(l),l=l.next;var $=R.length;if($>0){var ss=f===0?n:null;Ds(s,R,ss)}}o.first=s.first&&s.first.e,o.last=d&&d.e;for(var es of r.values())P(es.e);r.clear()}function j(o,e,s,r){fs(o.v,e),o.i=s}function X(o,e,s,r,n,t,a,i,p,f,_){var I=(p&ys)!==0,l=(p&ps)===0,m=I?l?hs(n,!1,!1):k(n):n,d=(p&_s)===0?a:k(a),u={i:d,v:m,k:t,a:null,e:null,prev:s,next:r};try{if(o===null){var c=document.createDocumentFragment();c.append(o=J())}return u.e=L(()=>i(o,m,d,f),N),u.e.prev=s&&s.e,u.e.next=r&&r.e,s===null?_||(e.first=u):(s.next=u,s.e.next=u.e),r!==null&&(r.prev=u,r.e.prev=u.e),u}finally{}}function z(o,e,s){for(var r=o.next?o.next.e.nodes_start:s,n=e?e.e.nodes_start:s,t=o.e.nodes_start;t!==null&&t!==r;){var a=xs(t);n.before(t),t=a}}function M(o,e,s){e===null?o.first=s:(e.next=s,e.e.next=s&&s.e),s!==null&&(s.prev=e,s.e.prev=e&&e.e)}var qs=Z('<div class="ball svelte-q1ynn0" role="none"></div>'),Bs=Z('<div class="background svelte-q1ynn0" role="none"></div>');function Os(o,e){Q(e,!0);const s=e.balls.length,r=Is([]);let n=0;for(let a=0;a<s;a++)r.push(void 0);W(()=>{for(let i=0;i<s;i++)r[i].style.width=e.balls[i].radius*2+"px",r[i].style.height=e.balls[i].radius*2+"px";const a=setInterval(()=>{for(let i=0;i<s;i++)r[i].style.left=e.balls[i].coords.x-e.balls[i].radius+"px",r[i].style.top=e.balls[i].coords.y-e.balls[i].radius+"px"},10);return()=>{clearInterval(a)}});var t=Bs();t.__mousemove=a=>{let i=e.balls[n];i.drag&&(i.coords.x=a.clientX,i.coords.y=a.clientY)},t.__mouseup=()=>{let a=e.balls[n];a.drag&&(a.drag=!1,a.last_coords.x=a.coords.x,a.last_coords.y=a.coords.y)},Rs(t,21,()=>e.balls,Cs,(a,i,p)=>{var f=qs();As(f,"name",p),f.__mousedown=_=>{F(i).drag=!0,n=p},Ns(f,(_,I)=>r[I]=_,_=>r?.[_],()=>[p]),G(a,f)}),Ts(t),G(o,t),V()}bs(["mousemove","mouseup","mousedown"]);class y{constructor(e,s){this.x=e,this.y=s}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){const e=this.magnitude();e>0&&(this.x=this.x/e,this.y=this.y/e)}static add(e,s){return new y(e.x+s.x,e.y+s.y)}static sub(e,s){return new y(e.x-s.x,e.y-s.y)}static mul(e,s){return new y(e.x*s.x,e.y*s.y)}static scalar_mul(e,s){return new y(e.x*s,e.y*s)}}class q{constructor(e,s,r){this.radius=r,this.coords=new y(e,s),this.last_coords=new y(e,s),this.acceleration=new y(0,3699.792541346783*9.81),this.mass=4/3*Math.PI*Math.pow(this.radius*.00027028542514872584,3)*1e3,this.drag=!1}update_coords(e){if(!this.drag){const s=y.sub(this.coords,this.last_coords);this.last_coords=this.coords,this.coords=y.add(y.add(this.coords,s),y.scalar_mul(this.acceleration,e*e))}}apply_constraints(e,s){this.coords.y-this.radius<0?this.coords.y=0+this.radius:this.coords.y+this.radius>s&&(this.coords.y=s-this.radius),this.coords.x-this.radius<0?this.coords.x=0+this.radius:this.coords.x+this.radius>e&&(this.coords.x=e-this.radius)}static checks_collision(e,s){const r=e.coords.x-s.coords.x,n=e.coords.y-s.coords.y,t=r*r+n*n,a=(e.radius+s.radius)*(e.radius+s.radius);return t<=a}static responds_collision(e,s){let r=y.sub(e.coords,s.coords);const n=r.magnitude(),t=e.radius+s.radius-n;t>0&&(r.normalize(),e.coords=y.add(e.coords,y.scalar_mul(r,t*(s.mass/(e.mass+s.mass)))),s.coords=y.sub(s.coords,y.scalar_mul(r,t*(e.mass/(e.mass+s.mass)))))}}function Ys(o,e){Q(e,!0);const s=[],r=500;for(let n=0;n<r-2;n++)s.push(new q(Math.random()*1920,Math.random()*1080,20));s.push(new q(Math.random()*1920,Math.random()*1080,50)),s.push(new q(Math.random()*1920,Math.random()*1080,100)),W(()=>{const n=setInterval(()=>{for(let t=0;t<r-1;t++)for(let a=t+1;a<r;a++)q.checks_collision(s[t],s[a])&&q.responds_collision(s[t],s[a]);for(let t of s)t.update_coords(.001),t.apply_constraints(window.innerWidth,window.innerHeight)},1);return()=>{clearInterval(n)}}),Os(o,{get balls(){return s}}),V()}export{Ys as component};
