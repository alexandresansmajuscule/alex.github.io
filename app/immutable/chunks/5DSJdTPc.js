import{o as _,p as y,H as E,h as o,C as T,v as k,w as p,x as u,y as m,z as d,A as w,B as v,D as A,E as b,F,G as g,I as M,J as C,K as D,M as x,O as N,P as R,Q as O}from"./C_rb9rw5.js";let f;function S(){f=void 0}function I(c){let e=null,a=o;var t;if(o){for(e=d,f===void 0&&(f=w(document.head));f!==null&&(f.nodeType!==T||f.data!==k);)f=p(f);f===null?u(!1):f=m(p(f))}o||(t=document.head.appendChild(_()));try{y(()=>c(t),E)}finally{a&&(u(!0),f=d,m(e))}}class B{anchor;#s=new Map;#t=new Map;#e=new Map;#a=!0;constructor(e,a=!0){this.anchor=e,this.#a=a}#n=()=>{var e=v;if(this.#s.has(e)){var a=this.#s.get(e),t=this.#t.get(a);if(t)A(t);else{var s=this.#e.get(a);s&&(this.#t.set(a,s.effect),this.#e.delete(a),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),t=s.effect)}for(const[n,i]of this.#s){if(this.#s.delete(n),n===e)break;const r=this.#e.get(i);r&&(b(r.effect),this.#e.delete(i))}for(const[n,i]of this.#t){if(n===a)continue;const r=()=>{if(Array.from(this.#s.values()).includes(n)){var l=document.createDocumentFragment();M(i,l),l.append(_()),this.#e.set(n,{effect:i,fragment:l})}else b(i);this.#t.delete(n)};this.#a||!t?F(i,r,!1):r()}}};ensure(e,a){var t=v,s=C();if(a&&!this.#t.has(e)&&!this.#e.has(e))if(s){var n=document.createDocumentFragment(),i=_();n.append(i),this.#e.set(e,{effect:g(()=>a(i)),fragment:n})}else this.#t.set(e,g(()=>a(this.anchor)));if(this.#s.set(t,e),s){for(const[r,h]of this.#t)r===e?t.skipped_effects.delete(h):t.skipped_effects.add(h);for(const[r,h]of this.#e)r===e?t.skipped_effects.delete(h.effect):t.skipped_effects.add(h.effect);t.add_callback(this.#n)}else o&&(this.anchor=d),this.#n()}}function P(c,e,...a){var t=new B(c);y(()=>{const s=e()??null;t.ensure(s,s&&(n=>s(n,...a)))},O)}function z(c){return(e,...a)=>{var t=c(...a),s;if(o)s=d,D();else{var n=t.render().trim(),i=x(n);s=w(i),e.before(s)}const r=t.setup?.(s);N(s,s),typeof r=="function"&&R(r)}}export{B,z as c,I as h,S as r,P as s};
